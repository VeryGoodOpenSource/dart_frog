"use strict";(self.webpackChunkdart_frog_docs=self.webpackChunkdart_frog_docs||[]).push([[387],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(n),f=o,g=d["".concat(c,".").concat(f)]||d[f]||l[f]||a;return n?r.createElement(g,i(i({ref:t},p),{},{components:n})):r.createElement(g,i({ref:t},p))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var u=2;u<a;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8738:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return l}});var r=n(3117),o=n(102),a=(n(7294),n(3905)),i=["components"],s={sidebar_position:5},c="Testing \ud83e\uddea",u={unversionedId:"basics/testing",id:"basics/testing",title:"Testing \ud83e\uddea",description:"In Dart Frog, we can unit test our route handlers and middleware effectively because they are plain functions.",source:"@site/docs/basics/testing.md",sourceDirName:"basics",slug:"/basics/testing",permalink:"/dart_frog/docs/basics/testing",draft:!1,editUrl:"https://github.com/verygoodventures/dart_frog/tree/main/docs/docs/basics/testing.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"docs",previous:{title:"Dependency Injection \ud83d\udc89",permalink:"/dart_frog/docs/basics/dependency-injection"},next:{title:"Serving Static Files \ud83d\udcc1",permalink:"/dart_frog/docs/basics/serving-static-files"}},p={},l=[],d={toc:l};function f(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"testing-"},"Testing \ud83e\uddea"),(0,a.kt)("p",null,"In Dart Frog, we can unit test our route handlers and middleware effectively because they are plain functions."),(0,a.kt)("p",null,"For example, we can test our route handler above using ",(0,a.kt)("inlineCode",{parentName:"p"},"package:test"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-dart"},"import 'dart:io';\n\nimport 'package:dart_frog/dart_frog.dart';\nimport 'package:mocktail/mocktail.dart';\nimport 'package:test/test.dart';\n\nimport '../../routes/index.dart' as route;\n\nclass _MockRequestContext extends Mock implements RequestContext {}\n\nvoid main() {\n  group('GET /', () {\n    test('responds with a 200 and greeting.', () async {\n      const greeting = 'Hello World!';\n      final context = _MockRequestContext();\n      when(() => context.read<String>()).thenReturn(greeting);\n      final response = route.onRequest(context);\n      expect(response.statusCode, equals(HttpStatus.ok));\n      expect(response.body(), completion(equals(greeting)));\n    });\n  });\n}\n")),(0,a.kt)("p",null,"In the above test, we're using ",(0,a.kt)("inlineCode",{parentName:"p"},"package:mocktail")," to create a mock ",(0,a.kt)("inlineCode",{parentName:"p"},"RequestContext")," and stub the return value when calling ",(0,a.kt)("inlineCode",{parentName:"p"},"context.read<String>()"),". Then, all we need to do is call ",(0,a.kt)("inlineCode",{parentName:"p"},"onRequest")," with the mocked context and we can assert that the response is what we expect. In this case, we're checking the statusCode and response body to ensure that the response is a 200 with the provided greeting."))}f.isMDXComponent=!0}}]);